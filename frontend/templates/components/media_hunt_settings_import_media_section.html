<section id="mediaHuntSettingsImportMediaSection" class="content-section" style="display: none;">
    {% with section_id='media-hunt-import-media' %}{% include 'components/sponsor_banners_partial.html' %}{% endwith %}
    <link rel="stylesheet" href="./static/css/import-media.css?v=1.0.8">
    <div id="mediaHuntImportMediaContainer" class="app-content-panel">
        <div class="media-hunt-settings-instance-bar" style="margin-bottom: 16px;">
            <div class="media-hunt-import-media-mode-toggle">
                <button type="button" class="import-media-mode-btn active" data-mode="movie" id="import-media-mode-movie">
                    <i class="fas fa-film"></i> Movies
                </button>
                <button type="button" class="import-media-mode-btn" data-mode="tv" id="import-media-mode-tv">
                    <i class="fas fa-tv"></i> TV
                </button>
            </div>
            <select id="media-hunt-import-media-instance-select" class="control-select" aria-label="Instance">
                <option value="">Loading...</option>
            </select>
        </div>

        <div class="settings-group import-media-settings-group">
            <div class="import-media-header">
                <div>
                    <h3>Import Media</h3>
                    <p class="import-media-help" id="media-hunt-import-media-help">Import existing movies from your root folders into your Movie Collection. Unmapped folders are automatically detected and matched to TMDB.</p>
                </div>
                <div class="import-media-header-actions">
                    <button type="button" class="btn-scan" id="media-hunt-import-media-scan-btn" title="Scan for Unmapped Folders">
                        <i class="fas fa-search"></i> Scan Folders
                    </button>
                    <button type="button" class="btn-import-all" id="media-hunt-import-media-import-all-btn" title="Import All Matched" style="display: none;">
                        <i class="fas fa-check-double"></i> Import All
                    </button>
                </div>
            </div>

            <div class="import-media-stats" id="media-hunt-import-media-stats" style="display: none;">
                <div class="import-media-stat">
                    <span class="stat-value" id="media-hunt-import-media-stat-total">0</span>
                    <span class="stat-label">Unmapped</span>
                </div>
                <div class="import-media-stat matched">
                    <span class="stat-value" id="media-hunt-import-media-stat-matched">0</span>
                    <span class="stat-label">Matched</span>
                </div>
                <div class="import-media-stat pending">
                    <span class="stat-value" id="media-hunt-import-media-stat-pending">0</span>
                    <span class="stat-label">Pending</span>
                </div>
                <div class="import-media-stat no-match">
                    <span class="stat-value" id="media-hunt-import-media-stat-nomatch">0</span>
                    <span class="stat-label">No Match</span>
                </div>
                <div class="import-media-stat-last-scan" id="media-hunt-import-media-last-scan"></div>
            </div>

            <div class="import-media-status-bar" id="media-hunt-import-media-status-bar" style="display: none;">
                <div class="import-media-status-icon"><i class="fas fa-spinner fa-spin"></i></div>
                <div class="import-media-status-text" id="media-hunt-import-media-status-text">Scanning...</div>
            </div>

            <div class="import-media-list-header">
                <div class="header-col poster-col"></div>
                <div class="header-col info-col" id="media-hunt-import-media-header-info">FOLDER / FILE INFORMATION</div>
                <div class="header-col match-col">TMDB MATCH</div>
                <div class="header-col conf-col">CONFIDENCE</div>
                <div class="header-col actions-col">ACTIONS</div>
            </div>

            <div class="import-media-list" id="media-hunt-import-media-list">
                <div class="import-media-empty" id="media-hunt-import-media-empty">
                    <i class="fas fa-folder-open"></i>
                    <p>Click <strong>Scan Folders</strong> to detect unmapped movies in your root folders.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="media-hunt-import-media-search-modal" class="import-media-modal" style="display: none;">
        <div class="import-media-modal-backdrop" id="media-hunt-import-media-search-backdrop"></div>
        <div class="import-media-modal-content">
            <div class="import-media-modal-header">
                <button type="button" class="import-media-modal-close" id="media-hunt-import-media-search-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
                <h2 class="import-media-modal-title" id="media-hunt-import-media-search-title">Find Movie Match</h2>
                <p class="import-media-modal-subtitle" id="media-hunt-import-media-search-folder-name"></p>
            </div>
            <div class="import-media-search-form">
                <div class="import-media-search-row">
                    <input type="text" id="media-hunt-import-media-search-input" class="control-input" placeholder="Movie title...">
                    <input type="text" id="media-hunt-import-media-search-year" class="control-input" placeholder="Year" style="max-width: 100px;">
                    <button type="button" class="btn-search" id="media-hunt-import-media-search-go-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div class="import-media-search-results" id="media-hunt-import-media-search-results">
                    <p class="import-media-search-hint">Search for the correct movie title above.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.media-hunt-import-media-mode-toggle {
    display: flex;
    gap: 4px;
    margin-right: 12px;
}
.import-media-mode-btn {
    padding: 8px 14px;
    border: 1px solid rgba(148, 163, 184, 0.3);
    background: rgba(148, 163, 184, 0.1);
    color: #94a3b8;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}
.import-media-mode-btn:hover { background: rgba(148, 163, 184, 0.2); color: #e2e8f0; }
.import-media-mode-btn.active {
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    border-color: rgba(99, 102, 241, 0.5);
    color: #fff;
}
#mediaHuntSettingsImportMediaSection .media-hunt-settings-instance-bar {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
}
</style>
