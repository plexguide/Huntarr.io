<!-- Requestarr Section - Discover Style -->
<div id="requestarr-section" class="content-section" style="display: none;">
    <link rel="stylesheet" href="./static/css/requestarr-discover.css">
    
    <div class="requestarr-content">
        <!-- Global Search Bar -->
        <div class="global-search-bar">
            <i class="fas fa-search"></i>
            <input type="text" id="global-search-input" placeholder="Search Movies & TV" autocomplete="off">
        </div>
        
        <!-- Search Results View -->
        <div id="search-results-view" style="display: none;">
            <h2 class="search-results-title">Search Results</h2>
            <div id="search-results-grid" class="search-results-grid">
                <!-- Search results will be populated here -->
            </div>
        </div>
        
        <!-- Discover View -->
        <div id="requestarr-discover-view" class="requestarr-view active" style="display: block;">
            <!-- Trending Section -->
            <section class="carousel-section">
                <h2 class="section-title">Trending This Week</h2>
                <div class="carousel-container">
                    <button class="carousel-arrow left" data-target="trending-carousel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div id="trending-carousel" class="media-carousel">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading trending content...</p>
                        </div>
                    </div>
                    <button class="carousel-arrow right" data-target="trending-carousel">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </section>

            <!-- Popular Movies Section -->
            <section class="carousel-section">
                <h2 class="section-title">Popular Movies</h2>
                <div class="carousel-container">
                    <button class="carousel-arrow left" data-target="popular-movies-carousel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div id="popular-movies-carousel" class="media-carousel">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading movies...</p>
                        </div>
                    </div>
                    <button class="carousel-arrow right" data-target="popular-movies-carousel">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </section>

            <!-- Popular TV Section -->
            <section class="carousel-section">
                <h2 class="section-title">Popular TV Shows</h2>
                <div class="carousel-container">
                    <button class="carousel-arrow left" data-target="popular-tv-carousel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div id="popular-tv-carousel" class="media-carousel">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading TV shows...</p>
                        </div>
                    </div>
                    <button class="carousel-arrow right" data-target="popular-tv-carousel">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </section>
        </div>

        <!-- Movies View -->
        <div id="requestarr-movies-view" class="requestarr-view" style="display: none;">
            <!-- Controls Bar -->
            <div class="movies-controls">
                <div class="sort-dropdown">
                    <select id="movies-sort" class="control-select">
                        <option value="popularity.desc">Popularity</option>
                        <option value="vote_average.desc">Rating</option>
                        <option value="release_date.desc">Release Date Descending</option>
                        <option value="release_date.asc">Release Date Ascending</option>
                        <option value="title.asc">Title (A-Z)</option>
                        <option value="title.desc">Title (Z-A)</option>
                    </select>
                </div>
                <button class="filter-button" id="movies-filter-btn">
                    <i class="fas fa-filter"></i>
                    <span id="movies-filter-count">0 Active Filters</span>
                </button>
            </div>
            
            <!-- Movies Grid -->
            <div id="movies-grid" class="media-grid">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading movies...</p>
                </div>
            </div>
            
            <!-- Infinite scroll sentinel -->
            <div class="load-more-container">
                <div id="movies-scroll-sentinel" style="height: 1px; width: 100%;"></div>
            </div>
        </div>

        <!-- TV Shows View -->
        <div id="requestarr-tv-view" class="requestarr-view" style="display: none;">
            <!-- Controls Bar -->
            <div class="movies-controls">
                <div class="sort-dropdown">
                    <select id="tv-sort" class="control-select">
                        <option value="popularity.desc">Popularity</option>
                        <option value="vote_average.desc">Rating</option>
                        <option value="first_air_date.desc">First Air Date Descending</option>
                        <option value="first_air_date.asc">First Air Date Ascending</option>
                        <option value="name.asc">Title (A-Z)</option>
                        <option value="name.desc">Title (Z-A)</option>
                    </select>
                </div>
                <button class="filter-button" id="tv-filter-btn">
                    <i class="fas fa-filter"></i>
                    <span id="tv-filter-count">0 Active Filters</span>
                </button>
            </div>
            
            <!-- TV Shows Grid -->
            <div id="tv-grid" class="media-grid">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading TV shows...</p>
                </div>
            </div>
            
            <!-- Infinite scroll sentinel -->
            <div class="load-more-container">
                <div id="tv-scroll-sentinel" style="height: 1px; width: 100%;"></div>
            </div>
        </div>

        <!-- History View -->
        <div id="requestarr-history-view" class="requestarr-view">
            <h1 class="page-title">Request History</h1>
            <div id="history-list" class="history-container">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading history...</p>
                </div>
            </div>
        </div>

        <!-- Hidden Media View -->
        <div id="requestarr-hidden-view" class="requestarr-view">
            <h1 class="page-title">Hidden Media</h1>
            <p class="page-subtitle">Media you've permanently hidden from discovery</p>
            
            <!-- Filter Tabs -->
            <div class="hidden-media-filters">
                <button class="filter-tab active" data-filter="all">
                    <i class="fas fa-th"></i> All
                </button>
                <button class="filter-tab" data-filter="movie">
                    <i class="fas fa-film"></i> Movies
                </button>
                <button class="filter-tab" data-filter="tv">
                    <i class="fas fa-tv"></i> TV Shows
                </button>
            </div>
            
            <!-- Hidden Media Grid -->
            <div id="hidden-media-grid" class="media-grid">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading hidden media...</p>
                </div>
            </div>
            
            <!-- Pagination -->
            <div id="hidden-media-pagination" class="pagination-container" style="display: none;">
                <button id="hidden-prev-page" class="pagination-btn">
                    <i class="fas fa-chevron-left"></i> Previous
                </button>
                <span id="hidden-page-info" class="page-info">Page 1 of 1</span>
                <button id="hidden-next-page" class="pagination-btn">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <!-- Settings View -->
        <div id="requestarr-settings-view" class="requestarr-view">
            <div class="requestarr-settings-container">
                <!-- Filters Card -->
                <div class="settings-card">
                    <h3>Filters</h3>
                    
                    <div class="settings-field">
                        <label for="discover-region">Region</label>
                        <div class="custom-select-wrapper">
                            <div id="region-select-display" class="custom-select-display">
                                <span id="region-selected-text">ðŸ‡ºðŸ‡¸ United States</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div id="region-dropdown" class="custom-select-dropdown" style="display: none;">
                                <div id="region-list" class="custom-select-list">
                                    <!-- Options will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        <small>Filter via Regional Availability</small>
                    </div>

                <div class="settings-field">
                    <label for="discover-providers">Providers</label>
                    <div class="language-select-wrapper">
                        <div id="provider-tags" class="language-tags"></div>
                        <input type="text" id="discover-providers" class="settings-input" placeholder="Select providers..." readonly>
                        <div id="provider-dropdown" class="language-dropdown" style="display: none;">
                            <div id="provider-list" class="language-list">
                                <!-- Options will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    <small>Filter via Streaming Providers (uses selected region)</small>
                </div>
                    
                    <div class="settings-field">
                        <label for="discover-language">Language(s)</label>
                        <div class="language-select-wrapper">
                            <div id="language-tags" class="language-tags"></div>
                            <input type="text" id="discover-language" class="settings-input" placeholder="Select languages..." readonly>
                            <div id="language-dropdown" class="language-dropdown" style="display: none;">
                                <div id="language-list" class="language-list">
                                    <div class="language-item" data-code="">All Languages</div>
                                </div>
                            </div>
                        </div>
                        <small>Filter via Original Language(s)</small>
                    </div>
                    
                    <div class="settings-actions">
                        <button id="save-discover-filters" class="btn-primary">
                            <i class="fas fa-save"></i> Save Filters
                        </button>
                    </div>
                </div>

                <!-- Cooldown Settings Card -->
                <div class="settings-card">
                    <h3>Request Cooldown Period</h3>
                    
                    <div class="settings-field">
                        <label for="cooldown-period">Cooldown Duration</label>
                        <select id="cooldown-period" class="settings-select">
                            <option value="12">12 Hours</option>
                            <option value="24">24 Hours</option>
                            <option value="72">3 Days</option>
                            <option value="168" selected>7 Days</option>
                            <option value="720">30 Days</option>
                            <option value="8760">1 Year</option>
                        </select>
                        <small>Time users must wait before re-requesting the same item</small>
                    </div>
                    
                    <div class="settings-actions">
                        <button id="save-requestarr-settings" class="btn-primary">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                        <button id="reset-cooldowns-btn" class="btn-secondary" style="margin-left: 10px;">
                            <i class="fas fa-undo"></i> Reset All Cooldowns (25h+)
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Movies Filters Side Panel -->
    <div id="movies-filter-modal" class="filter-panel" style="display: none;">
        <div class="filter-backdrop" onclick="window.RequestarrDiscover.closeFiltersModal()"></div>
        <div class="filter-panel-content">
            <div class="filter-panel-header">
                <h2>Filters</h2>
                <button class="filter-close" onclick="window.RequestarrDiscover.closeFiltersModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="filter-panel-body">
                <div class="filter-active-badge">
                    <span id="filter-active-count">0 Active Filters</span>
                </div>
                
                <!-- Hide Available Movies -->
                <div class="filter-group">
                    <label class="filter-toggle-label">
                        <input type="checkbox" id="hide-available-movies" class="filter-checkbox">
                        <span class="filter-toggle-text">Hide Available Movies</span>
                    </label>
                </div>
                
                <!-- Genres -->
                <div class="filter-group">
                    <label class="filter-label">Genres</label>
                    
                    <!-- Selected Genre Pills -->
                    <div class="selected-genres-container" id="selected-genres" style="display: none;">
                        <!-- Pills will be added here -->
                    </div>
                    
                    <!-- Genre Dropdown -->
                    <div class="genre-select-wrapper">
                        <input 
                            type="text" 
                            id="genre-search-input" 
                            class="genre-search-input" 
                            placeholder="Select genres..." 
                            readonly
                        >
                        <div id="genre-dropdown" class="genre-dropdown" style="display: none;">
                            <div id="genre-list" class="genre-list">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Release Year Range -->
                <div class="filter-group">
                    <label class="filter-label">Release Year</label>
                    <div class="filter-range-text" id="year-display">Movies from 1900 to 2029</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="year-range"></div>
                        <input type="range" id="filter-year-min" class="range-min" value="1900" min="1900" max="2029" step="1">
                        <input type="range" id="filter-year-max" class="range-max" value="2029" min="1900" max="2029" step="1">
                    </div>
                </div>
                
                <!-- Runtime -->
                <div class="filter-group">
                    <label class="filter-label">Runtime</label>
                    <div class="filter-range-text" id="runtime-display">0-400 minute runtime</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="runtime-range"></div>
                        <input type="range" id="filter-runtime-min" class="range-min" value="0" min="0" max="400" step="1">
                        <input type="range" id="filter-runtime-max" class="range-max" value="400" min="0" max="400" step="1">
                    </div>
                </div>
                
                <!-- TMDB User Score -->
                <div class="filter-group">
                    <label class="filter-label">TMDB User Score</label>
                    <div class="filter-range-text" id="rating-display">Ratings between 0 and 10</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="rating-range"></div>
                        <input type="range" id="filter-rating-min" class="range-min" value="0" min="0" max="10" step="0.1">
                        <input type="range" id="filter-rating-max" class="range-max" value="10" min="0" max="10" step="0.1">
                    </div>
                </div>
                
                <!-- TMDB User Vote Count -->
                <div class="filter-group">
                    <label class="filter-label">TMDB User Vote Count</label>
                    <div class="filter-range-text" id="votes-display">Number of votes between 0 and 10000</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="votes-range"></div>
                        <input type="range" id="filter-votes-min" class="range-min" value="0" min="0" max="10000" step="10">
                        <input type="range" id="filter-votes-max" class="range-max" value="10000" min="0" max="10000" step="10">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TV Shows Filters Side Panel -->
    <div id="tv-filter-modal" class="filter-panel" style="display: none;">
        <div class="filter-backdrop" onclick="window.RequestarrDiscover.closeTVFiltersModal()"></div>
        <div class="filter-panel-content">
            <div class="filter-panel-header">
                <h2>Filters</h2>
                <button class="filter-close" onclick="window.RequestarrDiscover.closeTVFiltersModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="filter-panel-body">
                <div class="filter-active-badge">
                    <span id="tv-filter-active-count">0 Active Filters</span>
                </div>
                
                <!-- Hide Available TV Shows -->
                <div class="filter-group">
                    <label class="filter-toggle-label">
                        <input type="checkbox" id="hide-available-tv" class="filter-checkbox">
                        <span class="filter-toggle-text">Hide Available TV Shows</span>
                    </label>
                </div>
                
                <!-- Genres -->
                <div class="filter-group">
                    <label class="filter-label">Genres</label>
                    
                    <!-- Selected Genre Pills -->
                    <div class="selected-genres-container" id="tv-selected-genres" style="display: none;">
                        <!-- Pills will be added here -->
                    </div>
                    
                    <!-- Genre Dropdown -->
                    <div class="genre-select-wrapper">
                        <input 
                            type="text" 
                            id="tv-genre-search-input" 
                            class="genre-search-input" 
                            placeholder="Select genres..." 
                            readonly
                        >
                        <div id="tv-genre-dropdown" class="genre-dropdown" style="display: none;">
                            <div id="tv-genre-list" class="genre-list">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- First Air Year Range -->
                <div class="filter-group">
                    <label class="filter-label">First Air Year</label>
                    <div class="filter-range-text" id="tv-year-display">TV shows from 1900 to 2029</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="tv-year-range"></div>
                        <input type="range" id="tv-filter-year-min" class="range-min" value="1900" min="1900" max="2029" step="1">
                        <input type="range" id="tv-filter-year-max" class="range-max" value="2029" min="1900" max="2029" step="1">
                    </div>
                </div>
                
                <!-- TMDB User Score -->
                <div class="filter-group">
                    <label class="filter-label">TMDB User Score</label>
                    <div class="filter-range-text" id="tv-rating-display">Ratings between 0 and 10</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="tv-rating-range"></div>
                        <input type="range" id="tv-filter-rating-min" class="range-min" value="0" min="0" max="10" step="0.1">
                        <input type="range" id="tv-filter-rating-max" class="range-max" value="10" min="0" max="10" step="0.1">
                    </div>
                </div>
                
                <!-- TMDB User Vote Count -->
                <div class="filter-group">
                    <label class="filter-label">TMDB User Vote Count</label>
                    <div class="filter-range-text" id="tv-votes-display">Number of votes between 0 and 10000</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="tv-votes-range"></div>
                        <input type="range" id="tv-filter-votes-min" class="range-min" value="0" min="0" max="10000" step="10">
                        <input type="range" id="tv-filter-votes-max" class="range-max" value="10000" min="0" max="10000" step="10">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Media Details -->
    <div id="media-modal" class="media-modal" style="display: none;">
        <div class="modal-backdrop" onclick="RequestarrDiscover.closeModal()"></div>
        <div class="modal-content">
            <button class="modal-close" onclick="RequestarrDiscover.closeModal()">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="modal-body">
                <!-- Backdrop -->
                <div class="modal-backdrop-image"></div>
                
                <!-- Content -->
                <div class="modal-info">
                    <div class="modal-poster">
                        <img src="" alt="Poster">
                    </div>
                    
                    <div class="modal-details">
                        <h1 class="modal-title"></h1>
                        <div class="modal-meta">
                            <span class="year"></span>
                            <span class="rating"></span>
                            <span class="runtime"></span>
                        </div>
                        <div class="modal-genres"></div>
                        <p class="modal-overview"></p>
                        
                        <!-- Request Options -->
                        <div class="modal-request-section">
                            <h3>Request This Title</h3>
                            
                            <!-- Instance Selection -->
                            <div class="form-group">
                                <label>Select Instance</label>
                                <select id="modal-instance-select" class="modal-select">
                                    <option value="">Select an instance...</option>
                                </select>
                            </div>
                            
                            <!-- Request Button -->
                            <button id="modal-request-btn" class="modal-request-btn" disabled>
                                <i class="fas fa-plus"></i>
                                Request
                            </button>
                            
                            <!-- Status Message -->
                            <div id="modal-status" class="modal-status"></div>
                        </div>
                        
                        <!-- Additional Info -->
                        <div class="modal-extra-info">
                            <div class="cast-section">
                                <h4>Cast</h4>
                                <div class="cast-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./static/js/requestarr-discover.js"></script>
</div>
