<!-- Mobile-specific topbar - matching desktop design language -->
<div id="mobile-topbar" class="mobile-topbar">
    <!-- Animated gradient accent line -->
    <div class="mobile-accent-line"></div>
    
    <div class="mobile-topbar-content">
        <!-- Left side: Current section title -->
        <div class="mobile-topbar-left">
            <span class="mobile-app-title" id="mobilePageTitle">Home</span>
        </div>
        
        <!-- Right side: Chips -->
        <div class="mobile-topbar-right">
            <div class="mobile-chip-strip">
                <a href="https://github.com/plexguide/huntarr" target="_blank" rel="noopener" class="mobile-chip mobile-star-chip">
                    <i class="fas fa-star"></i>
                    <span id="mobile-github-stars">--</span>
                </a>
                <div class="mobile-chip mobile-version-chip">
                    <i class="fas fa-code-branch"></i>
                    <span id="mobile-current-version">--</span>
                </div>
                <a href="https://github.com/plexguide/Huntarr.io/releases" target="_blank" rel="noopener" class="mobile-chip mobile-latest-chip">
                    <i class="fas fa-arrow-up"></i>
                    <span id="mobile-latest-version">--</span>
                </a>
            </div>
        </div>
    </div>
</div>

<style>
/* ===== MOBILE TOPBAR CORE ===== */
.mobile-topbar {
    display: none;
    background: linear-gradient(135deg, 
        rgba(22, 30, 44, 0.98) 0%, 
        rgba(15, 22, 35, 0.98) 40%, 
        rgba(18, 26, 40, 0.98) 70%, 
        rgba(22, 30, 44, 0.98) 100%
    );
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 10px 16px;
    position: sticky;
    top: 0;
    z-index: 100;
    width: 100%;
    box-sizing: border-box;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}

/* ===== ANIMATED ACCENT LINE ===== */
.mobile-accent-line {
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, 
        #3498db 0%,
        #5ba8d6 15%,
        #d4a843 35%, 
        #f0c850 50%, 
        #d4a843 65%,
        #5ba8d6 85%, 
        #3498db 100%
    );
    background-size: 200% 100%;
    animation: mobile-gradient-flow 6s ease-in-out infinite;
    z-index: 10;
    opacity: 0.8;
}

@keyframes mobile-gradient-flow {
    0% { background-position: 0% 50%; }
    50% { background-position: 200% 50%; }
    100% { background-position: 0% 50%; }
}

.mobile-topbar-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 100%;
}

.mobile-topbar-left {
    flex: 1;
    min-width: 0;
}

.mobile-app-title {
    font-size: 16px;
    font-weight: 700;
    color: #e8ecf2;
    letter-spacing: 0.3px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.mobile-topbar-right {
    flex-shrink: 0;
}

/* ===== MOBILE CHIPS ===== */
.mobile-chip-strip {
    display: flex;
    gap: 5px;
    align-items: center;
}

.mobile-chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    height: 24px;
    padding: 0 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 700;
    text-decoration: none;
    border: 1px solid transparent;
    white-space: nowrap;
    transition: all 0.2s ease;
}

.mobile-chip i {
    font-size: 9px;
    opacity: 0.8;
}

/* Star chip */
.mobile-star-chip {
    background: rgba(255, 193, 7, 0.10);
    border-color: rgba(255, 193, 7, 0.25);
    color: #f5d060;
}
.mobile-star-chip i { color: #ffd700; }

/* Version chip */
.mobile-version-chip {
    background: rgba(52, 152, 219, 0.08);
    border-color: rgba(52, 152, 219, 0.18);
    color: #7cb8e4;
}
.mobile-version-chip i { color: #3498db; }

/* Latest chip */
.mobile-latest-chip {
    background: rgba(46, 204, 113, 0.08);
    border-color: rgba(46, 204, 113, 0.18);
    color: #7cd4a0;
}
.mobile-latest-chip i { color: #2ecc71; }

/* ===== MOBILE RESPONSIVE ===== */
@media (max-width: 768px) {
    .mobile-topbar {
        display: block !important;
        padding-left: 24px !important;
    }
    
    .topbar {
        display: none !important;
    }
}

@media (max-width: 480px) {
    .mobile-topbar {
        padding: 8px 12px;
    }
    
    .mobile-app-title {
        font-size: 14px;
    }
    
    .mobile-chip-strip {
        gap: 4px;
    }
    
    .mobile-chip {
        padding: 0 6px;
        font-size: 10px;
        height: 22px;
    }
    
    .mobile-chip i {
        font-size: 8px;
    }
    
    /* Hide latest on very small screens */
    .mobile-latest-chip {
        display: none;
    }
}
</style>

<script>
// Update mobile topbar with current section title
function updateMobilePageTitle(title) {
    const mobileTitleElement = document.getElementById('mobilePageTitle');
    if (mobileTitleElement) {
        mobileTitleElement.textContent = title || 'Home';
    }
}

// Update mobile topbar version info
function updateMobileVersionInfo() {
    try {
        const versionInfo = localStorage.getItem('huntarr-version-info');
        if (versionInfo) {
            const parsedInfo = JSON.parse(versionInfo);
            const currentVersionElement = document.getElementById('mobile-current-version');
            const latestVersionElement = document.getElementById('mobile-latest-version');
            
            if (parsedInfo.currentVersion && currentVersionElement) {
                currentVersionElement.textContent = parsedInfo.currentVersion;
            }
            if (parsedInfo.latestVersion && latestVersionElement) {
                latestVersionElement.textContent = parsedInfo.latestVersion;
            }
        }

        const starsInfo = localStorage.getItem('huntarr-github-stars');
        const starsElement = document.getElementById('mobile-github-stars');
        if (starsInfo && starsElement) {
            try {
                const parsedStars = JSON.parse(starsInfo);
                if (parsedStars && parsedStars.stars !== undefined) {
                    starsElement.textContent = Number(parsedStars.stars).toLocaleString();
                }
            } catch (e) {
                starsElement.textContent = starsInfo;
            }
        }
    } catch (e) {
        console.error('Error updating mobile version info:', e);
    }
}

// Initialize mobile topbar when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    updateMobileVersionInfo();
    
    // Watch for page title changes in the main topbar
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.type === 'childList' || mutation.type === 'characterData') {
                const pageTitleElement = document.getElementById('currentPageTitle');
                if (pageTitleElement) {
                    updateMobilePageTitle(pageTitleElement.textContent);
                }
            }
        });
    });
    
    // Observe the main page title for changes
    const pageTitleElement = document.getElementById('currentPageTitle');
    if (pageTitleElement) {
        updateMobilePageTitle(pageTitleElement.textContent);
        observer.observe(pageTitleElement, {
            childList: true,
            characterData: true,
            subtree: true
        });
    }
    
    // Watch for localStorage version changes
    window.addEventListener('storage', function(e) {
        if (e.key === 'huntarr-version-info' || e.key === 'huntarr-github-stars') {
            updateMobileVersionInfo();
        }
    });
});

// Make updateMobilePageTitle available globally
window.updateMobilePageTitle = updateMobilePageTitle;
</script>
