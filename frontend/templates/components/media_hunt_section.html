<!-- Media Hunt Section – unified for Movie Hunt and TV Hunt. Mode set by router. -->
<div id="mediaHuntSection" class="content-section" style="display: none;">
    <link rel="stylesheet" href="./static/css/media-hunt.css?v=1.3.0">
    <link rel="stylesheet" href="./static/css/media-hunt-detail.css?v=1.5.0">
    <link rel="stylesheet" href="./static/css/media-hunt-tv.css?v=1.0.0">
    <link rel="stylesheet" href="./static/css/home.css">
    <div class="requestarr-content media-hunt-content">
        {% from 'components/page_header_partial.html' import page_header %}
        {{ page_header(back_href='./#home', parent_icon='fas fa-film', parent_name='Media Hunt', current_name='Discover', sponsor_section_id='media-hunt') }}
        <div id="media-hunt-beta-notice" class="media-hunt-beta-notice" role="status">
            <i class="fas fa-flask" aria-hidden="true"></i>
            <span id="media-hunt-beta-text"><strong>Beta feature:</strong> Media Hunt is in active development.</span>
        </div>
        <div class="global-search-bar">
            <i class="fas fa-search"></i>
            <input type="text" id="media-hunt-search-input" placeholder="Search" aria-label="Search">
        </div>
        <div id="media-hunt-search-results-view" class="requestarr-view" style="display: none;">
            <h2 class="search-results-title">Search Results</h2>
            <div id="media-hunt-search-results-grid" class="search-results-grid"></div>
        </div>
        <div id="media-hunt-main-view" class="requestarr-view" style="display: block;">
            <div class="movies-controls">
                <div class="instance-selector-container">
                    <select id="media-hunt-instance-select" class="control-select instance-select" aria-label="Instance">
                        <option value="">Loading instances...</option>
                    </select>
                </div>
                <div class="sort-dropdown">
                    <select id="media-hunt-sort" class="control-select">
                        <option value="popularity.desc">Popularity</option>
                    </select>
                </div>
                <button type="button" class="filter-button" id="media-hunt-filter-btn" style="display: none;">
                    <i class="fas fa-filter"></i>
                    <span id="media-hunt-filter-count">0 Active Filters</span>
                </button>
            </div>
            <div id="media-hunt-media-grid" class="media-grid">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p id="media-hunt-grid-loading-text">Loading...</p>
                </div>
            </div>
            <div class="load-more-container">
                <div id="media-hunt-scroll-sentinel" style="height: 1px; width: 100%;"></div>
            </div>
        </div>
    </div>

    <!-- ===== MEDIA HUNT SETUP WIZARD (full-takeover, shown when setup incomplete) ===== -->
    <div id="media-hunt-setup-wizard-view" style="display: none; padding: 20px;">
        {% from 'components/page_header_partial.html' import page_header %}
        {{ page_header(back_href='./#home', parent_icon='fas fa-folder-open', parent_name='Media Hunt', current_name='Setup Guide', sponsor_section_id='media-hunt-collection') }}

        <div class="setup-wizard" id="media-hunt-setup-wizard" style="max-width: 640px; margin: 30px auto 0;">
            <div class="setup-wizard-header">
                <div class="setup-wizard-icon">
                    <img src="./static/logo/256.png" alt="Huntarr Logo" style="width: 48px; height: 48px;">
                </div>
                <div>
                    <h2 class="setup-wizard-title">Media Hunt Setup</h2>
                    <p class="setup-wizard-desc">Complete the steps below to get Media Hunt fully configured.</p>
                </div>
            </div>

            <!-- Progress bar -->
            <div class="setup-wizard-progress">
                <div class="setup-wizard-progress-fill" id="setup-wizard-progress-fill" style="width: 0%;"></div>
            </div>

            <!-- Step 1: Instances -->
            <div class="setup-wizard-step" id="setup-step-1" data-step="1">
                <div class="setup-wizard-step-header" data-step-toggle="1">
                    <div class="setup-wizard-step-indicator" id="setup-step-indicator-1">
                        <span class="step-number">1</span>
                    </div>
                    <div class="setup-wizard-step-info">
                        <span class="setup-wizard-step-title">Add an Instance</span>
                        <span class="setup-wizard-step-subtitle">Connect a Movie Hunt or TV Hunt instance to your media server</span>
                    </div>
                    <i class="fas fa-chevron-down setup-wizard-step-chevron"></i>
                </div>
                <div class="setup-wizard-step-body" id="setup-step-body-1">
                    <p>Configure at least one Movie Hunt or TV Hunt instance to connect Huntarr to your media library.</p>
                    <button type="button" class="setup-wizard-action-btn" data-wizard-nav="media-hunt-instances">
                        <i class="fas fa-layer-group"></i> Configure Instances
                    </button>
                </div>
            </div>

            <!-- Step 2: Indexers -->
            <div class="setup-wizard-step" id="setup-step-2" data-step="2">
                <div class="setup-wizard-step-header" data-step-toggle="2">
                    <div class="setup-wizard-step-indicator" id="setup-step-indicator-2">
                        <span class="step-number">2</span>
                    </div>
                    <div class="setup-wizard-step-info">
                        <span class="setup-wizard-step-title">Add Indexers</span>
                        <span class="setup-wizard-step-subtitle">Configure search indexers for finding media</span>
                    </div>
                    <i class="fas fa-chevron-down setup-wizard-step-chevron"></i>
                </div>
                <div class="setup-wizard-step-body" id="setup-step-body-2">
                    <p><strong>Two steps:</strong></p>
                    <ol style="margin: 12px 0 16px 0; padding-left: 20px; color: #94a3b8; font-size: 0.9rem; line-height: 1.7;">
                        <li><strong>Add to the Index Master Pool</strong> — Add your indexers (API keys, URLs) to the central pool.</li>
                        <li><strong>Assign to each instance</strong> — The pool is just a pool. You must import indexers into each Movie Hunt and TV Hunt instance for them to be used.</li>
                    </ol>
                    <button type="button" class="setup-wizard-action-btn" data-wizard-nav="indexer-hunt">
                        <i class="fas fa-search-plus"></i> Add Indexer
                    </button>
                </div>
            </div>

            <!-- Step 3: Root Folders -->
            <div class="setup-wizard-step" id="setup-step-3" data-step="3">
                <div class="setup-wizard-step-header" data-step-toggle="3">
                    <div class="setup-wizard-step-indicator" id="setup-step-indicator-3">
                        <span class="step-number">3</span>
                    </div>
                    <div class="setup-wizard-step-info">
                        <span class="setup-wizard-step-title">Root Folders</span>
                        <span class="setup-wizard-step-subtitle">Set where your media files are stored</span>
                    </div>
                    <i class="fas fa-chevron-down setup-wizard-step-chevron"></i>
                </div>
                <div class="setup-wizard-step-body" id="setup-step-body-3">
                    <p>Root folders tell Huntarr where your media files are stored. <strong>You must configure root folders for every instance</strong> — each Movie Hunt and TV Hunt instance has its own. Use the instance dropdown on the Root Folders page to switch between instances and add folders for each.</p>
                    <button type="button" class="setup-wizard-action-btn" data-wizard-nav="settings-root-folders">
                        <i class="fas fa-folder-open"></i> Configure Root Folders
                    </button>
                </div>
            </div>

            <!-- Step 4: Download Client -->
            <div class="setup-wizard-step" id="setup-step-4" data-step="4">
                <div class="setup-wizard-step-header" data-step-toggle="4">
                    <div class="setup-wizard-step-indicator" id="setup-step-indicator-4">
                        <span class="step-number">4</span>
                    </div>
                    <div class="setup-wizard-step-info">
                        <span class="setup-wizard-step-title">Download Client</span>
                        <span class="setup-wizard-step-subtitle">Configure a download client (NZB Hunt, SABnzbd, NZBGet)</span>
                    </div>
                    <i class="fas fa-chevron-down setup-wizard-step-chevron"></i>
                </div>
                <div class="setup-wizard-step-body" id="setup-step-body-4">
                    <p>Add a download client so Huntarr can send downloads. Choose NZB Hunt (built-in), SABnzbd, or NZBGet.</p>
                    <button type="button" class="setup-wizard-action-btn" data-wizard-nav="settings-clients">
                        <i class="fas fa-cloud-download-alt"></i> Add Client
                    </button>
                </div>
            </div>

            <!-- Step 5: NZB Servers (conditional — only if NZB Hunt is the client) -->
            <div class="setup-wizard-step" id="setup-step-5" data-step="5" style="display: none;">
                <div class="setup-wizard-step-header" data-step-toggle="5">
                    <div class="setup-wizard-step-indicator" id="setup-step-indicator-5">
                        <span class="step-number">5</span>
                    </div>
                    <div class="setup-wizard-step-info">
                        <span class="setup-wizard-step-title">Usenet Servers</span>
                        <span class="setup-wizard-step-subtitle">Configure Usenet servers for NZB Hunt downloads</span>
                    </div>
                    <i class="fas fa-chevron-down setup-wizard-step-chevron"></i>
                </div>
                <div class="setup-wizard-step-body" id="setup-step-body-5">
                    <p>NZB Hunt is your download client. Add at least one Usenet server so it can download NZBs.</p>
                    <button type="button" class="setup-wizard-action-btn" data-wizard-nav="nzb-hunt-servers">
                        <i class="fas fa-server"></i> Configure Servers
                    </button>
                </div>
            </div>

            <!-- Skip button -->
            <div style="text-align: center; padding: 18px 20px;">
                <button type="button" id="setup-wizard-skip" class="setup-wizard-skip-btn">
                    <i class="fas fa-forward"></i> Skip Setup Guide
                </button>
            </div>
        </div>
    </div>

    <!-- Media Hunt Collection: Movie Hunt + TV Hunt instance dropdowns, combined library view -->
    <div id="media-hunt-collection-view" class="media-hunt-collection-view" style="display: none;">
        <div style="padding: 0 0 20px 0;">
        {% from 'components/page_header_partial.html' import page_header %}
        {{ page_header(back_href='./#home', parent_icon='fas fa-folder-open', parent_name='Media Hunt', current_name='Collections', sponsor_section_id='media-hunt-collection') }}

        <div id="media-hunt-collection-content-wrapper" style="display: none;">
        <div class="global-search-bar" style="margin-bottom: 12px;">
            <i class="fas fa-search"></i>
            <input type="text" id="media-hunt-collection-search-input" placeholder="Search" aria-label="Search collection">
        </div>
        <div id="media-hunt-collection-search-results-view" class="requestarr-view" style="display: none;">
            <h2 class="search-results-title">Search Results</h2>
            <div id="media-hunt-collection-search-results-grid" class="search-results-grid"></div>
        </div>
        <div id="media-hunt-collection-main-content">
            <div class="discover-instance-controls media-hunt-collection-controls" style="margin-bottom: 20px;">
                <div class="instance-selector-container">
                    <select id="media-hunt-collection-movie-instance-select" class="control-select instance-select" aria-label="Movie Hunt Instance">
                        <option value="">Loading Movie Hunt instances...</option>
                    </select>
                </div>
                <div class="instance-selector-container">
                    <select id="media-hunt-collection-tv-instance-select" class="control-select instance-select" aria-label="TV Hunt Instance">
                        <option value="">Loading TV Hunt instances...</option>
                    </select>
                </div>
                <div class="sort-dropdown">
                    <select id="media-hunt-collection-sort" class="control-select">
                        <option value="title.asc">Title (A-Z)</option>
                        <option value="title.desc">Title (Z-A)</option>
                        <option value="year.desc">Year (newest)</option>
                        <option value="year.asc">Year (oldest)</option>
                    </select>
                </div>
                <div class="view-mode-selector">
                    <select id="media-hunt-collection-view-mode" class="control-select">
                        <option value="posters">Posters</option>
                        <option value="table">Table</option>
                        <option value="overview">Overview</option>
                    </select>
                </div>
            </div>
            <div id="media-hunt-collection-grid" class="media-grid">
                <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i><p>Loading collection...</p></div>
            </div>
            <div id="media-hunt-collection-table" class="media-table-container" style="display: none;">
                <table class="media-table">
                    <thead><tr><th style="width: 60px;"></th><th>Title</th><th style="width: 80px;">Year</th><th style="width: 80px;">Type</th></tr></thead>
                    <tbody id="media-hunt-collection-table-body"></tbody>
                </table>
            </div>
            <div id="media-hunt-collection-overview" class="media-overview-container" style="display: none;">
                <div id="media-hunt-collection-overview-list"></div>
            </div>
        </div>
        <div id="media-hunt-collection-series-detail-view" class="tv-hunt-series-detail-view" style="display: none;">
            <div class="series-detail-header">
                <button type="button" class="back-btn" id="media-hunt-collection-series-back-btn"><i class="fas fa-arrow-left"></i> Back to Collection</button>
            </div>
            <div id="media-hunt-collection-series-detail-content"></div>
        </div>
        </div>
        </div>
    </div>

    <!-- Filters (Movie mode only; visibility set by JS) -->
    <div id="media-hunt-filter-modal" class="filter-panel" style="display: none;">
        <div class="filter-backdrop" id="media-hunt-filter-backdrop"></div>
        <div class="filter-panel-content">
            <div class="filter-panel-header">
                <h2>Filters</h2>
                <button type="button" class="filter-close" id="media-hunt-filter-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="filter-panel-body">
                <div class="filter-active-badge">
                    <span id="media-hunt-filter-active-count">0 Active Filters</span>
                </div>
                <div class="filter-group">
                    <label class="filter-toggle-label">
                        <input type="checkbox" id="media-hunt-hide-available-movies" class="filter-checkbox">
                        <span class="filter-toggle-text">Hide Available Movies</span>
                    </label>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Genres</label>
                    <div class="selected-genres-container" id="media-hunt-selected-genres" style="display: none;"></div>
                    <div class="genre-select-wrapper">
                        <input type="text" id="media-hunt-genre-search-input" class="genre-search-input" placeholder="Select genres..." readonly>
                        <div id="media-hunt-genre-dropdown" class="genre-dropdown" style="display: none;">
                            <div id="media-hunt-genre-list" class="genre-list"></div>
                        </div>
                    </div>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Release Year</label>
                    <div class="filter-range-text" id="media-hunt-year-display">Movies from 1900 to 2029</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="media-hunt-year-range"></div>
                        <input type="range" id="media-hunt-filter-year-min" class="range-min" value="1900" min="1900" max="2029" step="1">
                        <input type="range" id="media-hunt-filter-year-max" class="range-max" value="2029" min="1900" max="2029" step="1">
                    </div>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Runtime</label>
                    <div class="filter-range-text" id="media-hunt-runtime-display">0-400 minute runtime</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="media-hunt-runtime-range"></div>
                        <input type="range" id="media-hunt-filter-runtime-min" class="range-min" value="0" min="0" max="400" step="1">
                        <input type="range" id="media-hunt-filter-runtime-max" class="range-max" value="400" min="0" max="400" step="1">
                    </div>
                </div>
                <div class="filter-group">
                    <label class="filter-label">TMDB User Score</label>
                    <div class="filter-range-text" id="media-hunt-rating-display">Ratings between 0 and 10</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="media-hunt-rating-range"></div>
                        <input type="range" id="media-hunt-filter-rating-min" class="range-min" value="0" min="0" max="10" step="0.1">
                        <input type="range" id="media-hunt-filter-rating-max" class="range-max" value="10" min="0" max="10" step="0.1">
                    </div>
                </div>
                <div class="filter-group">
                    <label class="filter-label">TMDB User Vote Count</label>
                    <div class="filter-range-text" id="media-hunt-votes-display">Number of votes between 0 and 10000</div>
                    <div class="dual-range-slider">
                        <div class="slider-track"></div>
                        <div class="slider-range" id="media-hunt-votes-range"></div>
                        <input type="range" id="media-hunt-filter-votes-min" class="range-min" value="0" min="0" max="10000" step="10">
                        <input type="range" id="media-hunt-filter-votes-max" class="range-max" value="10000" min="0" max="10000" step="10">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
